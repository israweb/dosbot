# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –û–∫—Ä—É–∂–µ–Ω–∏—è

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ä–µ–¥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –û–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –§–∞–π–ª—ã](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ-—Ñ–∞–π–ª—ã)
- [–°–µ–∫—Ä–µ—Ç—ã –∏ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#—Å–µ–∫—Ä–µ—Ç—ã-–∏-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [–°—Ä–µ–¥—ã –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è](#—Å—Ä–µ–¥—ã-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è)
- [–í–∞–ª–∏–¥–∞—Ü–∏—è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](#–≤–∞–ª–∏–¥–∞—Ü–∏—è-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –û–∫—Ä—É–∂–µ–Ω–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

```bash
# =============================================================================
# –û–°–ù–û–í–ù–ê–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
# =============================================================================

# –û–∫—Ä—É–∂–µ–Ω–∏–µ (development, staging, production)
ENVIRONMENT=development

# –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –ª–æ–≥–æ–≤
LOG_FILE=logs/trading.log

# =============================================================================
# API –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
# =============================================================================

# API –∫–ª—é—á–∏ –±–∏—Ä–∂–∏ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
API_KEY=your_exchange_api_key_here
API_SECRET=your_exchange_api_secret_here

# –ë–∞–∑–æ–≤—ã–π URL API –±–∏—Ä–∂–∏
BASE_URL=https://api.binance.com

# –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å–µ–∫—É–Ω–¥—ã)
API_TIMEOUT=30

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
MAX_RETRIES=3

# =============================================================================
# –¢–û–†–ì–û–í–ê–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
# =============================================================================

# –¢–æ—Ä–≥–æ–≤–∞—è –ø–∞—Ä–∞
SYMBOL=BTCUSDT

# –í—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
TIMEFRAME=1h

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ (USDT)
MAX_POSITION_SIZE=1000

# –ü—Ä–æ—Ü–µ–Ω—Ç —Å—Ç–æ–ø-–ª–æ—Å—Å–∞
STOP_LOSS_PERCENT=2.0

# –ü—Ä–æ—Ü–µ–Ω—Ç —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç–∞
TAKE_PROFIT_PERCENT=5.0

# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ—Ä–¥–µ—Ä–∞
MIN_ORDER_SIZE=10

# =============================================================================
# –ú–ê–®–ò–ù–ù–û–ï –û–ë–£–ß–ï–ù–ò–ï
# =============================================================================

# –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ (—Å–µ–∫—É–Ω–¥—ã)
MODEL_UPDATE_INTERVAL=3600

# –†–∞–∑–º–µ—Ä –æ–∫–Ω–∞ –¥–ª—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
FEATURE_WINDOW=100

# –ü–æ—Ä–æ–≥ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π
PREDICTION_THRESHOLD=0.7

# –ü—É—Ç—å –∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏
MODEL_PATH=models/zigzag_model.pkl

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ø–æ—Ö –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
TRAINING_EPOCHS=100

# –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞
BATCH_SIZE=32

# –°–∫–æ—Ä–æ—Å—Ç—å –æ–±—É—á–µ–Ω–∏—è
LEARNING_RATE=0.001

# =============================================================================
# –ë–ê–ó–ê –î–ê–ù–ù–´–•
# =============================================================================

# URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
DATABASE_URL=postgresql://user:password@localhost:5432/crypto_trading

# URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Redis
REDIS_URL=redis://localhost:6379/0

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –≤ –ø—É–ª–µ
DB_POOL_SIZE=10

# –¢–∞–π–º–∞—É—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î (—Å–µ–∫—É–Ω–¥—ã)
DB_TIMEOUT=30

# =============================================================================
# –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –ú–ï–¢–†–ò–ö–ò
# =============================================================================

# –ü–æ—Ä—Ç –¥–ª—è Prometheus –º–µ—Ç—Ä–∏–∫
PROMETHEUS_PORT=9090

# –ü–æ—Ä—Ç –¥–ª—è Grafana
GRAFANA_PORT=3000

# –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ (—Å–µ–∫—É–Ω–¥—ã)
METRICS_INTERVAL=60

# –í–∫–ª—é—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (true/false)
DETAILED_METRICS=false

# =============================================================================
# –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨
# =============================================================================

# –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT —Ç–æ–∫–µ–Ω–æ–≤
JWT_SECRET=your_jwt_secret_key_here

# –ö–ª—é—á –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
ENCRYPTION_KEY=your_encryption_key_here

# –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ JWT —Ç–æ–∫–µ–Ω–∞ (—Å–µ–∫—É–Ω–¥—ã)
JWT_EXPIRATION=3600

# –í–∫–ª—é—á–∏—Ç—å HTTPS (true/false)
ENABLE_HTTPS=false

# =============================================================================
# –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø
# =============================================================================

# Telegram Bot Token –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
TELEGRAM_BOT_TOKEN=your_telegram_bot_token

# Telegram Chat ID –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
TELEGRAM_CHAT_ID=your_telegram_chat_id

# Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD=your_email_password

# Webhook URL –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
WEBHOOK_URL=https://your-webhook-url.com/notifications

# =============================================================================
# –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò
# =============================================================================

# –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å
TIMEZONE=UTC

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤
MAX_WORKERS=4

# –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É —Ç–æ—Ä–≥–æ–≤—ã–º–∏ —Ü–∏–∫–ª–∞–º–∏ (—Å–µ–∫—É–Ω–¥—ã)
TRADING_INTERVAL=60

# –í–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ (true/false)
DEBUG_MODE=false

# –ü—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –¥–∞–Ω–Ω—ã–º–∏
DATA_DIR=data/

# –ü—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
PROCESSED_DATA_DIR=processed_data/

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –ª–æ–≥–∞ (MB)
MAX_LOG_SIZE=100

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤ –¥–ª—è —Ä–æ—Ç–∞—Ü–∏–∏
LOG_BACKUP_COUNT=5
```

### –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –∏–∑ —à–∞–±–ª–æ–Ω–∞
cp .env.example .env

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
nano .env  # –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

## üìÅ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –§–∞–π–ª—ã

### src/config.py

```python
import os
from typing import Optional
from dotenv import load_dotenv

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
load_dotenv()

class Config:
    """–û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è."""
    
    # –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    ENVIRONMENT = os.getenv("ENVIRONMENT", "development")
    DEBUG_MODE = os.getenv("DEBUG_MODE", "false").lower() == "true"
    LOG_LEVEL = os.getenv("LOG_LEVEL", "INFO")
    LOG_FILE = os.getenv("LOG_FILE", "logs/trading.log")
    
    # API –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    API_KEY = os.getenv("API_KEY")
    API_SECRET = os.getenv("API_SECRET")
    BASE_URL = os.getenv("BASE_URL", "https://api.binance.com")
    API_TIMEOUT = int(os.getenv("API_TIMEOUT", "30"))
    MAX_RETRIES = int(os.getenv("MAX_RETRIES", "3"))
    
    # –¢–æ—Ä–≥–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    SYMBOL = os.getenv("SYMBOL", "BTCUSDT")
    TIMEFRAME = os.getenv("TIMEFRAME", "1h")
    MAX_POSITION_SIZE = float(os.getenv("MAX_POSITION_SIZE", "1000"))
    STOP_LOSS_PERCENT = float(os.getenv("STOP_LOSS_PERCENT", "2.0"))
    TAKE_PROFIT_PERCENT = float(os.getenv("TAKE_PROFIT_PERCENT", "5.0"))
    MIN_ORDER_SIZE = float(os.getenv("MIN_ORDER_SIZE", "10"))
    
    # ML –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    MODEL_UPDATE_INTERVAL = int(os.getenv("MODEL_UPDATE_INTERVAL", "3600"))
    FEATURE_WINDOW = int(os.getenv("FEATURE_WINDOW", "100"))
    PREDICTION_THRESHOLD = float(os.getenv("PREDICTION_THRESHOLD", "0.7"))
    MODEL_PATH = os.getenv("MODEL_PATH", "models/zigzag_model.pkl")
    TRAINING_EPOCHS = int(os.getenv("TRAINING_EPOCHS", "100"))
    BATCH_SIZE = int(os.getenv("BATCH_SIZE", "32"))
    LEARNING_RATE = float(os.getenv("LEARNING_RATE", "0.001"))
    
    # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
    DATABASE_URL = os.getenv("DATABASE_URL")
    REDIS_URL = os.getenv("REDIS_URL", "redis://localhost:6379/0")
    DB_POOL_SIZE = int(os.getenv("DB_POOL_SIZE", "10"))
    DB_TIMEOUT = int(os.getenv("DB_TIMEOUT", "30"))
    
    # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
    PROMETHEUS_PORT = int(os.getenv("PROMETHEUS_PORT", "9090"))
    GRAFANA_PORT = int(os.getenv("GRAFANA_PORT", "3000"))
    METRICS_INTERVAL = int(os.getenv("METRICS_INTERVAL", "60"))
    DETAILED_METRICS = os.getenv("DETAILED_METRICS", "false").lower() == "true"
    
    # –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
    JWT_SECRET = os.getenv("JWT_SECRET")
    ENCRYPTION_KEY = os.getenv("ENCRYPTION_KEY")
    JWT_EXPIRATION = int(os.getenv("JWT_EXPIRATION", "3600"))
    ENABLE_HTTPS = os.getenv("ENABLE_HTTPS", "false").lower() == "true"
    
    # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    TELEGRAM_BOT_TOKEN = os.getenv("TELEGRAM_BOT_TOKEN")
    TELEGRAM_CHAT_ID = os.getenv("TELEGRAM_CHAT_ID")
    SMTP_SERVER = os.getenv("SMTP_SERVER")
    SMTP_PORT = int(os.getenv("SMTP_PORT", "587"))
    SMTP_USERNAME = os.getenv("SMTP_USERNAME")
    SMTP_PASSWORD = os.getenv("SMTP_PASSWORD")
    WEBHOOK_URL = os.getenv("WEBHOOK_URL")
    
    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    TIMEZONE = os.getenv("TIMEZONE", "UTC")
    MAX_WORKERS = int(os.getenv("MAX_WORKERS", "4"))
    TRADING_INTERVAL = int(os.getenv("TRADING_INTERVAL", "60"))
    DATA_DIR = os.getenv("DATA_DIR", "data/")
    PROCESSED_DATA_DIR = os.getenv("PROCESSED_DATA_DIR", "processed_data/")
    MAX_LOG_SIZE = int(os.getenv("MAX_LOG_SIZE", "100"))
    LOG_BACKUP_COUNT = int(os.getenv("LOG_BACKUP_COUNT", "5"))
    
    @classmethod
    def validate(cls) -> bool:
        """–í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫."""
        required_vars = []
        
        if cls.ENVIRONMENT == "production":
            required_vars.extend([
                ("API_KEY", cls.API_KEY),
                ("API_SECRET", cls.API_SECRET),
                ("JWT_SECRET", cls.JWT_SECRET),
                ("ENCRYPTION_KEY", cls.ENCRYPTION_KEY),
            ])
        
        missing_vars = [var_name for var_name, var_value in required_vars if not var_value]
        
        if missing_vars:
            raise ValueError(f"Missing required environment variables: {', '.join(missing_vars)}")
        
        return True
    
    @classmethod
    def get_database_config(cls) -> dict:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö."""
        return {
            "url": cls.DATABASE_URL,
            "pool_size": cls.DB_POOL_SIZE,
            "timeout": cls.DB_TIMEOUT,
        }
    
    @classmethod
    def get_trading_config(cls) -> dict:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏."""
        return {
            "symbol": cls.SYMBOL,
            "timeframe": cls.TIMEFRAME,
            "max_position_size": cls.MAX_POSITION_SIZE,
            "stop_loss_percent": cls.STOP_LOSS_PERCENT,
            "take_profit_percent": cls.TAKE_PROFIT_PERCENT,
            "min_order_size": cls.MIN_ORDER_SIZE,
            "trading_interval": cls.TRADING_INTERVAL,
        }
    
    @classmethod
    def get_ml_config(cls) -> dict:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ ML."""
        return {
            "model_update_interval": cls.MODEL_UPDATE_INTERVAL,
            "feature_window": cls.FEATURE_WINDOW,
            "prediction_threshold": cls.PREDICTION_THRESHOLD,
            "model_path": cls.MODEL_PATH,
            "training_epochs": cls.TRAINING_EPOCHS,
            "batch_size": cls.BATCH_SIZE,
            "learning_rate": cls.LEARNING_RATE,
        }

# –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
config = Config()
```

## üîê –°–µ–∫—Ä–µ—Ç—ã –∏ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –°–µ–∫—Ä–µ—Ç–∞–º–∏

#### 1. –õ–æ–∫–∞–ª—å–Ω–∞—è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞ —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏
cat > .env << EOF
API_KEY=your_development_api_key
API_SECRET=your_development_api_secret
JWT_SECRET=$(openssl rand -hex 32)
ENCRYPTION_KEY=$(openssl rand -hex 32)
EOF

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
chmod 600 .env
```

#### 2. Docker Secrets

```yaml
# docker-compose.yml
version: '3.8'
services:
  app:
    image: crypto-trading-bot:latest
    secrets:
      - api_key
      - api_secret
      - jwt_secret
    environment:
      - API_KEY_FILE=/run/secrets/api_key
      - API_SECRET_FILE=/run/secrets/api_secret
      - JWT_SECRET_FILE=/run/secrets/jwt_secret

secrets:
  api_key:
    file: ./secrets/api_key.txt
  api_secret:
    file: ./secrets/api_secret.txt
  jwt_secret:
    file: ./secrets/jwt_secret.txt
```

#### 3. Kubernetes Secrets

```yaml
# k8s/secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: crypto-trading-secrets
  namespace: crypto-trading
type: Opaque
data:
  api-key: <base64-encoded-api-key>
  api-secret: <base64-encoded-api-secret>
  jwt-secret: <base64-encoded-jwt-secret>
  encryption-key: <base64-encoded-encryption-key>
```

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞ –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
kubectl create secret generic crypto-trading-secrets \
  --from-literal=api-key=your_api_key \
  --from-literal=api-secret=your_api_secret \
  --from-literal=jwt-secret=your_jwt_secret \
  --from-literal=encryption-key=your_encryption_key \
  -n crypto-trading
```

### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```python
# utils/encryption.py
import os
import base64
from cryptography.fernet import Fernet
from cryptography.hazmat.primitives import hashes
from cryptography.hazmat.primitives.kdf.pbkdf2 import PBKDF2HMAC

class ConfigEncryption:
    """–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è/–¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏."""
    
    def __init__(self, password: str):
        self.password = password.encode()
        self.key = self._derive_key()
        self.fernet = Fernet(self.key)
    
    def _derive_key(self) -> bytes:
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–∞ –∏–∑ –ø–∞—Ä–æ–ª—è."""
        salt = b'crypto_trading_salt'  # –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—É—é —Å–æ–ª—å
        kdf = PBKDF2HMAC(
            algorithm=hashes.SHA256(),
            length=32,
            salt=salt,
            iterations=100000,
        )
        key = base64.urlsafe_b64encode(kdf.derive(self.password))
        return key
    
    def encrypt_config(self, config_data: dict) -> str:
        """–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏."""
        import json
        config_json = json.dumps(config_data)
        encrypted_data = self.fernet.encrypt(config_json.encode())
        return base64.urlsafe_b64encode(encrypted_data).decode()
    
    def decrypt_config(self, encrypted_config: str) -> dict:
        """–î–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏."""
        import json
        encrypted_data = base64.urlsafe_b64decode(encrypted_config.encode())
        decrypted_data = self.fernet.decrypt(encrypted_data)
        return json.loads(decrypted_data.decode())

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
# encryption = ConfigEncryption("your_master_password")
# encrypted = encryption.encrypt_config({"api_key": "secret_key"})
# decrypted = encryption.decrypt_config(encrypted)
```

## üåç –°—Ä–µ–¥—ã –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### Development (.env.development)

```bash
ENVIRONMENT=development
DEBUG_MODE=true
LOG_LEVEL=DEBUG

# –¢–µ—Å—Ç–æ–≤—ã–µ API –∫–ª—é—á–∏
API_KEY=test_api_key
API_SECRET=test_api_secret
BASE_URL=https://testnet.binance.vision

# –õ–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=sqlite:///./test.db
REDIS_URL=redis://localhost:6379/1

# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
MAX_POSITION_SIZE=10
MIN_ORDER_SIZE=1

# –ë—ã—Å—Ç—Ä—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
MODEL_UPDATE_INTERVAL=60
TRADING_INTERVAL=10
```

### Staging (.env.staging)

```bash
ENVIRONMENT=staging
DEBUG_MODE=false
LOG_LEVEL=INFO

# Staging API –∫–ª—é—á–∏
API_KEY=staging_api_key
API_SECRET=staging_api_secret
BASE_URL=https://testnet.binance.vision

# Staging –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=postgresql://user:pass@staging-db:5432/crypto_trading
REDIS_URL=redis://staging-redis:6379/0

# –£–º–µ—Ä–µ–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è staging
MAX_POSITION_SIZE=100
MIN_ORDER_SIZE=5

# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
MODEL_UPDATE_INTERVAL=1800
TRADING_INTERVAL=30
```

### Production (.env.production)

```bash
ENVIRONMENT=production
DEBUG_MODE=false
LOG_LEVEL=WARNING

# –ü—Ä–æ–¥–∞–∫—à–µ–Ω API –∫–ª—é—á–∏ (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ö)
API_KEY=${API_KEY}
API_SECRET=${API_SECRET}
BASE_URL=https://api.binance.com

# –ü—Ä–æ–¥–∞–∫—à–µ–Ω –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=${DATABASE_URL}
REDIS_URL=${REDIS_URL}

# –ü—Ä–æ–¥–∞–∫—à–µ–Ω —Ä–∞–∑–º–µ—Ä—ã
MAX_POSITION_SIZE=1000
MIN_ORDER_SIZE=10

# –ü—Ä–æ–¥–∞–∫—à–µ–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
MODEL_UPDATE_INTERVAL=3600
TRADING_INTERVAL=60

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
ENABLE_HTTPS=true
JWT_EXPIRATION=1800

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
DETAILED_METRICS=true
METRICS_INTERVAL=30
```

## ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –°–∫—Ä–∏–ø—Ç –í–∞–ª–∏–¥–∞—Ü–∏–∏

```python
# scripts/validate_config.py
#!/usr/bin/env python3
"""–°–∫—Ä–∏–ø—Ç –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏."""

import os
import sys
from typing import List, Tuple
from src.config import Config

def validate_environment_variables() -> List[str]:
    """–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è."""
    errors = []
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
    if Config.ENVIRONMENT == "production":
        required_vars = [
            "API_KEY", "API_SECRET", "JWT_SECRET", "ENCRYPTION_KEY",
            "DATABASE_URL", "REDIS_URL"
        ]
        
        for var in required_vars:
            if not os.getenv(var):
                errors.append(f"Missing required environment variable: {var}")
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–∏—Å–ª–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
    numeric_vars = [
        ("API_TIMEOUT", Config.API_TIMEOUT),
        ("MAX_RETRIES", Config.MAX_RETRIES),
        ("MAX_POSITION_SIZE", Config.MAX_POSITION_SIZE),
        ("STOP_LOSS_PERCENT", Config.STOP_LOSS_PERCENT),
        ("TAKE_PROFIT_PERCENT", Config.TAKE_PROFIT_PERCENT),
    ]
    
    for var_name, var_value in numeric_vars:
        if var_value <= 0:
            errors.append(f"Invalid value for {var_name}: {var_value} (must be > 0)")
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
    if not (0 < Config.STOP_LOSS_PERCENT < 100):
        errors.append(f"STOP_LOSS_PERCENT must be between 0 and 100, got: {Config.STOP_LOSS_PERCENT}")
    
    if not (0 < Config.TAKE_PROFIT_PERCENT < 100):
        errors.append(f"TAKE_PROFIT_PERCENT must be between 0 and 100, got: {Config.TAKE_PROFIT_PERCENT}")
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ URL
    if Config.DATABASE_URL and not Config.DATABASE_URL.startswith(('postgresql://', 'sqlite://')):
        errors.append(f"Invalid DATABASE_URL format: {Config.DATABASE_URL}")
    
    if not Config.REDIS_URL.startswith('redis://'):
        errors.append(f"Invalid REDIS_URL format: {Config.REDIS_URL}")
    
    return errors

def validate_file_paths() -> List[str]:
    """–í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–µ–π –∫ —Ñ–∞–π–ª–∞–º –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º."""
    errors = []
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
    directories = [
        Config.DATA_DIR,
        Config.PROCESSED_DATA_DIR,
        os.path.dirname(Config.LOG_FILE),
        os.path.dirname(Config.MODEL_PATH),
    ]
    
    for directory in directories:
        if directory and not os.path.exists(directory):
            try:
                os.makedirs(directory, exist_ok=True)
            except Exception as e:
                errors.append(f"Cannot create directory {directory}: {e}")
    
    return errors

def validate_trading_parameters() -> List[str]:
    """–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤."""
    errors = []
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–∫–∏ —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    if Config.STOP_LOSS_PERCENT >= Config.TAKE_PROFIT_PERCENT:
        errors.append("STOP_LOSS_PERCENT should be less than TAKE_PROFIT_PERCENT")
    
    if Config.MIN_ORDER_SIZE >= Config.MAX_POSITION_SIZE:
        errors.append("MIN_ORDER_SIZE should be less than MAX_POSITION_SIZE")
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
    if Config.TRADING_INTERVAL < 10:
        errors.append("TRADING_INTERVAL should be at least 10 seconds")
    
    if Config.MODEL_UPDATE_INTERVAL < 300:
        errors.append("MODEL_UPDATE_INTERVAL should be at least 300 seconds (5 minutes)")
    
    return errors

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏."""
    print("üîç Validating configuration...")
    
    all_errors = []
    
    # –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
    env_errors = validate_environment_variables()
    all_errors.extend(env_errors)
    
    # –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–µ–π
    path_errors = validate_file_paths()
    all_errors.extend(path_errors)
    
    # –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    trading_errors = validate_trading_parameters()
    all_errors.extend(trading_errors)
    
    if all_errors:
        print("‚ùå Configuration validation failed:")
        for error in all_errors:
            print(f"  ‚Ä¢ {error}")
        sys.exit(1)
    else:
        print("‚úÖ Configuration validation passed!")
        print(f"Environment: {Config.ENVIRONMENT}")
        print(f"Log Level: {Config.LOG_LEVEL}")
        print(f"Trading Symbol: {Config.SYMBOL}")
        print(f"Timeframe: {Config.TIMEFRAME}")

if __name__ == "__main__":
    main()
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
python scripts/validate_config.py

# –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ Docker
docker run --env-file .env crypto-trading-bot python scripts/validate_config.py

# –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ CI/CD
pytest tests/test_config_validation.py
```

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –°–∫—Ä–∏–ø—Ç –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

```bash
#!/bin/bash
# scripts/setup_environment.sh

set -e

echo "üöÄ Setting up Crypto Trading Bot environment..."

# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
mkdir -p data processed_data logs models charts

# –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞ –∏–∑ —à–∞–±–ª–æ–Ω–∞
if [ ! -f .env ]; then
    if [ -f .env.example ]; then
        cp .env.example .env
        echo "üìù Created .env file from template"
    else
        echo "‚ö†Ô∏è  .env.example not found, creating basic .env file"
        cat > .env << EOF
ENVIRONMENT=development
LOG_LEVEL=INFO
SYMBOL=BTCUSDT
TIMEFRAME=1h
MAX_POSITION_SIZE=100
STOP_LOSS_PERCENT=2.0
TAKE_PROFIT_PERCENT=5.0
EOF
    fi
fi

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π
if ! grep -q "JWT_SECRET=" .env || [ "$(grep JWT_SECRET= .env | cut -d= -f2)" = "your_jwt_secret_key_here" ]; then
    JWT_SECRET=$(openssl rand -hex 32)
    sed -i "s/JWT_SECRET=.*/JWT_SECRET=$JWT_SECRET/" .env
    echo "üîë Generated JWT_SECRET"
fi

if ! grep -q "ENCRYPTION_KEY=" .env || [ "$(grep ENCRYPTION_KEY= .env | cut -d= -f2)" = "your_encryption_key_here" ]; then
    ENCRYPTION_KEY=$(openssl rand -hex 32)
    sed -i "s/ENCRYPTION_KEY=.*/ENCRYPTION_KEY=$ENCRYPTION_KEY/" .env
    echo "üîë Generated ENCRYPTION_KEY"
fi

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
chmod 600 .env
chmod +x scripts/*.sh

# –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
echo "üîç Validating configuration..."
python scripts/validate_config.py

echo "‚úÖ Environment setup completed!"
echo "üìù Please edit .env file with your API credentials"
echo "üöÄ Run 'docker-compose up' to start the application"
```

```bash
# –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
chmod +x scripts/setup_environment.sh
./scripts/setup_environment.sh
```

<function_calls>
<invoke name="todo_list">
<parameter name="todos">[{"content": "Create comprehensive deployment documentation", "id": "13", "priority": "high", "status": "completed"}, {"content": "Document Docker environment setup", "id": "14", "priority": "high", "status": "completed"}, {"content": "Create cloud deployment guide", "id": "15", "priority": "high", "status": "completed"}, {"content": "Document environment variables and secrets", "id": "16", "priority": "high", "status": "completed"}, {"content": "Create development setup guide", "id": "17", "priority": "medium", "status": "in_progress"}, {"content": "Document CI/CD pipeline configuration", "id": "18", "priority": "medium", "status": "pending"}]
